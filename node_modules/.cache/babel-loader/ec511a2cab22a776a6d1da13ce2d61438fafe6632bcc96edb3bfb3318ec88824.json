{"ast":null,"code":"/*!\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n!function (t, e) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = e(require(\"react\"), require(\"prop-types\"), require(\"@ckeditor/ckeditor5-watchdog\")) : \"function\" == typeof define && define.amd ? define([\"react\", \"prop-types\", \"@ckeditor/ckeditor5-watchdog\"], e) : \"object\" == typeof exports ? exports.CKEditor = e(require(\"react\"), require(\"prop-types\"), require(\"@ckeditor/ckeditor5-watchdog\")) : t.CKEditor = e(t.react, t[\"prop-types\"], t[\"@ckeditor/ckeditor5-watchdog\"]);\n}(self, (t, e, o) => (() => {\n  \"use strict\";\n\n  var r = {\n      546: t => {\n        t.exports = o;\n      },\n      949: t => {\n        t.exports = e;\n      },\n      155: e => {\n        e.exports = t;\n      }\n    },\n    i = {};\n  function n(t) {\n    var e = i[t];\n    if (void 0 !== e) return e.exports;\n    var o = i[t] = {\n      exports: {}\n    };\n    return r[t](o, o.exports, n), o.exports;\n  }\n  n.n = t => {\n    var e = t && t.__esModule ? () => t.default : () => t;\n    return n.d(e, {\n      a: e\n    }), e;\n  }, n.d = (t, e) => {\n    for (var o in e) n.o(e, o) && !n.o(t, o) && Object.defineProperty(t, o, {\n      enumerable: !0,\n      get: e[o]\n    });\n  }, n.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e), n.r = t => {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n  };\n  var a = {};\n  return (() => {\n    n.r(a), n.d(a, {\n      CKEditor: () => u,\n      CKEditorContext: () => c,\n      useMultiRootEditor: () => f\n    });\n    var t = n(155),\n      e = n.n(t),\n      o = n(949),\n      r = n.n(o);\n    const i = new Array(256).fill(\"\").map((t, e) => (\"0\" + e.toString(16)).slice(-2));\n    var s = n(546);\n    const d = e().createContext(\"contextWatchdog\");\n    class c extends e().Component {\n      constructor(t, e) {\n        super(t, e), this.contextWatchdog = null, this.props.isLayoutReady && this._initializeContextWatchdog(this.props.config);\n      }\n      shouldComponentUpdate(t) {\n        return this._shouldComponentUpdate(t);\n      }\n      async _shouldComponentUpdate(t) {\n        return t.id !== this.props.id && (this.contextWatchdog && (await this.contextWatchdog.destroy()), await this._initializeContextWatchdog(t.config)), t.isLayoutReady && !this.contextWatchdog ? (await this._initializeContextWatchdog(t.config), !0) : this.props.children !== t.children;\n      }\n      render() {\n        return e().createElement(d.Provider, {\n          value: this.contextWatchdog\n        }, this.props.children);\n      }\n      componentWillUnmount() {\n        this._destroyContext();\n      }\n      async _initializeContextWatchdog(t) {\n        this.contextWatchdog = new s.ContextWatchdog(this.props.context, this.props.watchdogConfig), this.contextWatchdog.on(\"error\", (t, e) => {\n          this.props.onError(e.error, {\n            phase: \"runtime\",\n            willContextRestart: e.causesRestart\n          });\n        }), this.contextWatchdog.on(\"stateChange\", () => {\n          \"ready\" === this.contextWatchdog.state && this.props.onReady && this.props.onReady(this.contextWatchdog.context);\n        }), await this.contextWatchdog.create(t).catch(t => {\n          this.props.onError(t, {\n            phase: \"initialization\",\n            willContextRestart: !1\n          });\n        });\n      }\n      async _destroyContext() {\n        this.contextWatchdog && (await this.contextWatchdog.destroy(), this.contextWatchdog = null);\n      }\n    }\n    c.defaultProps = {\n      isLayoutReady: !0,\n      onError: (t, e) => console.error(t, e)\n    }, c.propTypes = {\n      id: r().string,\n      isLayoutReady: r().bool,\n      context: r().func,\n      watchdogConfig: r().object,\n      config: r().object,\n      onReady: r().func,\n      onError: r().func\n    };\n    const h = \"Lock from React integration (@ckeditor/ckeditor5-react)\";\n    class u extends e().Component {\n      constructor(t) {\n        super(t), this.editorDestructionInProgress = null, this.domContainer = e().createRef(), this.watchdog = null;\n        const {\n          CKEDITOR_VERSION: o\n        } = window;\n        if (o) {\n          const [t] = o.split(\".\").map(Number);\n          t < 37 && console.warn(\"The <CKEditor> component requires using CKEditor 5 in version 37 or higher.\");\n        } else console.warn('Cannot find the \"CKEDITOR_VERSION\" in the \"window\" scope.');\n      }\n      get editor() {\n        return this.props.disableWatchdog ? this.instance : this.watchdog ? this.watchdog.editor : null;\n      }\n      shouldComponentUpdate(t) {\n        return !!this.editor && (t.id !== this.props.id || t.disableWatchdog !== this.props.disableWatchdog || (this._shouldUpdateEditor(t) && this.editor.data.set(t.data), \"disabled\" in t && (t.disabled ? this.editor.enableReadOnlyMode(h) : this.editor.disableReadOnlyMode(h)), !1));\n      }\n      async componentDidMount() {\n        await this._initializeEditor();\n      }\n      async componentDidUpdate() {\n        await this._destroyEditor(), await this._initializeEditor();\n      }\n      async componentWillUnmount() {\n        await this._destroyEditor();\n      }\n      render() {\n        return e().createElement(\"div\", {\n          ref: this.domContainer\n        });\n      }\n      async _initializeEditor() {\n        await this.editorDestructionInProgress, this.props.disableWatchdog ? this.instance = await this._createEditor(this.domContainer.current, this._getConfig()) : this.watchdog || (this.context instanceof s.ContextWatchdog ? this.watchdog = new l(this.context) : this.watchdog = new u._EditorWatchdog(this.props.editor, this.props.watchdogConfig), this.watchdog.setCreator((t, e) => this._createEditor(t, e)), this.watchdog.on(\"error\", (t, {\n          error: e,\n          causesRestart: o\n        }) => {\n          (this.props.onError || console.error)(e, {\n            phase: \"runtime\",\n            willEditorRestart: o\n          });\n        }), await this.watchdog.create(this.domContainer.current, this._getConfig()).catch(t => {\n          (this.props.onError || console.error)(t, {\n            phase: \"initialization\",\n            willEditorRestart: !1\n          });\n        }));\n      }\n      _createEditor(t, e) {\n        return this.props.editor.create(t, e).then(t => {\n          \"disabled\" in this.props && this.props.disabled && t.enableReadOnlyMode(h);\n          const e = t.model.document,\n            o = t.editing.view.document;\n          return e.on(\"change:data\", e => {\n            this.props.onChange && this.props.onChange(e, t);\n          }), o.on(\"focus\", e => {\n            this.props.onFocus && this.props.onFocus(e, t);\n          }), o.on(\"blur\", e => {\n            this.props.onBlur && this.props.onBlur(e, t);\n          }), setTimeout(() => {\n            this.props.onReady && this.props.onReady(t);\n          }), t;\n        });\n      }\n      async _destroyEditor() {\n        this.editorDestructionInProgress = new Promise(t => {\n          setTimeout(async () => this.watchdog ? (await this.watchdog.destroy(), this.watchdog = null, t()) : this.instance ? (await this.instance.destroy(), this.instance = null, t()) : void t());\n        });\n      }\n      _shouldUpdateEditor(t) {\n        return this.props.data !== t.data && this.editor.data.get() !== t.data;\n      }\n      _getConfig() {\n        const t = this.props.config || {};\n        return this.props.data && t.initialData && console.warn(\"Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified.\"), {\n          ...t,\n          initialData: t.initialData || this.props.data || \"\"\n        };\n      }\n    }\n    u.contextType = d, u.propTypes = {\n      editor: r().func.isRequired,\n      data: r().string,\n      config: r().object,\n      disableWatchdog: r().bool,\n      watchdogConfig: r().object,\n      onChange: r().func,\n      onReady: r().func,\n      onFocus: r().func,\n      onBlur: r().func,\n      onError: r().func,\n      disabled: r().bool,\n      id: r().any\n    }, u._EditorWatchdog = s.EditorWatchdog;\n    class l {\n      constructor(t) {\n        this._contextWatchdog = t, this._id = function () {\n          const t = 4294967296 * Math.random() >>> 0,\n            e = 4294967296 * Math.random() >>> 0,\n            o = 4294967296 * Math.random() >>> 0,\n            r = 4294967296 * Math.random() >>> 0;\n          return \"e\" + i[255 & t] + i[t >> 8 & 255] + i[t >> 16 & 255] + i[t >> 24 & 255] + i[255 & e] + i[e >> 8 & 255] + i[e >> 16 & 255] + i[e >> 24 & 255] + i[255 & o] + i[o >> 8 & 255] + i[o >> 16 & 255] + i[o >> 24 & 255] + i[255 & r] + i[r >> 8 & 255] + i[r >> 16 & 255] + i[r >> 24 & 255];\n        }();\n      }\n      setCreator(t) {\n        this._creator = t;\n      }\n      create(t, e) {\n        return this._contextWatchdog.add({\n          sourceElementOrData: t,\n          config: e,\n          creator: this._creator,\n          id: this._id,\n          type: \"editor\"\n        });\n      }\n      on(t, e) {\n        this._contextWatchdog.on(\"itemError\", (t, {\n          itemId: o,\n          error: r\n        }) => {\n          o === this._id && e(null, {\n            error: r,\n            causesRestart: void 0\n          });\n        });\n      }\n      destroy() {\n        return \"ready\" === this._contextWatchdog.state ? this._contextWatchdog.remove(this._id) : Promise.resolve();\n      }\n      get editor() {\n        return this._contextWatchdog.getItem(this._id);\n      }\n    }\n    const p = \"Lock from React integration (@ckeditor/ckeditor5-react)\",\n      g = ({\n        editor: o\n      }) => {\n        const r = (0, t.useRef)(null);\n        return (0, t.useEffect)(() => {\n          const t = r.current;\n          if (!o || !t) return;\n          const e = o.ui.view.toolbar.element;\n          return t && t.appendChild(e), () => {\n            t && t.removeChild(e);\n          };\n        }, [o && o.id]), e().createElement(\"div\", {\n          ref: r\n        });\n      },\n      f = o => {\n        const r = (0, t.useRef)(null),\n          i = (0, t.useRef)(null),\n          n = (0, t.useContext)(d),\n          [a, c] = (0, t.useState)(null),\n          [h, u] = (0, t.useState)(o.data),\n          [f, y] = (0, t.useState)(o.rootsAttributes || {}),\n          [m, b] = (0, t.useState)([]),\n          w = (0, t.useRef)(!0);\n        (0, t.useEffect)(() => ((async () => {\n          await i.current, !1 !== o.isLayoutReady && (await v());\n        })(), () => {\n          x().then(() => {\n            i.current = null;\n          });\n        }), [o.isLayoutReady]), (0, t.useEffect)(() => {\n          a && (o.disabled ? a.enableReadOnlyMode(p) : a.disableReadOnlyMode(p));\n        }, [o.disabled]), (0, t.useEffect)(() => {\n          if (a && !i.current) {\n            const t = a.getFullData();\n            u({\n              ...t\n            }), y({\n              ...a.getRootsAttributes()\n            }), b([...Object.keys(t).map(t => C(a, t))]);\n          }\n        }, [a && a.id]);\n        const E = () => {\n            const t = o.config || {};\n            return o.data && t.initialData && console.warn(\"Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified.\"), {\n              ...t,\n              rootsAttributes: f\n            };\n          },\n          C = (t, o) => e().createElement(\"div\", {\n            id: o,\n            key: o,\n            ref: e => {\n              if (e) {\n                const r = t.ui.view.createEditable(o, e);\n                t.ui.addEditable(r), t.editing.view.forceRender();\n              }\n            }\n          }),\n          R = (t, e) => o.editor.create(t, e).then(t => {\n            o.disabled && o.disabled && t.enableReadOnlyMode(p);\n            const e = t.model.document,\n              r = t.editing.view.document;\n            return e.on(\"change:data\", e => ((t, e) => {\n              const r = t.model.document;\n              if (!o.disableTwoWayDataBinding) {\n                const e = {},\n                  o = {};\n                r.differ.getChanges().forEach(o => {\n                  let r;\n                  if (r = \"insert\" == o.type || \"remove\" == o.type ? o.position.root : o.range.root, !r.isAttached()) return;\n                  const {\n                    rootName: i\n                  } = r;\n                  e[i] = t.getData({\n                    rootName: i\n                  });\n                }), r.differ.getChangedRoots().forEach(r => {\n                  if (r.state) return void (void 0 !== e[r.name] && delete e[r.name]);\n                  const i = r.name;\n                  o[i] = t.getRootAttributes(i);\n                }), Object.keys(e).length && u(t => ({\n                  ...t,\n                  ...e\n                })), Object.keys(o).length && y(t => ({\n                  ...t,\n                  ...o\n                }));\n              }\n              o.onChange && o.onChange(e, t);\n            })(t, e)), t.on(\"addRoot\", (e, r) => ((t, e, r) => {\n              const i = r.rootName,\n                n = C(t, i);\n              o.disableTwoWayDataBinding || (u(e => ({\n                ...e,\n                [i]: t.getData({\n                  rootName: i\n                })\n              })), y(e => ({\n                ...e,\n                [i]: t.getRootAttributes(i)\n              }))), b(t => [...t, n]);\n            })(t, 0, r)), t.on(\"detachRoot\", (e, r) => ((t, e, r) => {\n              const i = r.rootName;\n              b(t => t.filter(t => t.props.id !== i)), o.disableTwoWayDataBinding || (u(t => {\n                const {\n                  [i]: e,\n                  ...o\n                } = t;\n                return {\n                  ...o\n                };\n              }), y(t => {\n                const {\n                  [i]: e,\n                  ...o\n                } = t;\n                return {\n                  ...o\n                };\n              })), t.detachEditable(r);\n            })(t, 0, r)), r.on(\"focus\", e => {\n              o.onFocus && o.onFocus(e, t);\n            }), r.on(\"blur\", e => {\n              o.onBlur && o.onBlur(e, t);\n            }), c(t), o.onReady && o.onReady(t), t;\n          }),\n          x = async () => {\n            c(null), u({}), y({}), b([]), i.current = new Promise(t => {\n              setTimeout(async () => r.current ? (await r.current.destroy(), r.current = null, t()) : a ? (await a.destroy(), t()) : void t());\n            });\n          },\n          v = async () => {\n            if (o.disableWatchdog) return void (await R(o.data, E()));\n            if (r.current) return;\n            n instanceof s.ContextWatchdog ? r.current = new l(n) : r.current = new s.EditorWatchdog(o.editor, o.watchdogConfig);\n            const t = r.current;\n            t.setCreator((t, e) => R(t, e)), t.on(\"error\", (t, {\n              error: e,\n              causesRestart: r\n            }) => {\n              (o.onError || console.error)(e, {\n                phase: \"runtime\",\n                willEditorRestart: r\n              });\n            }), await t.create(h, E()).catch(t => {\n              (o.onError || console.error)(t, {\n                phase: \"initialization\",\n                willEditorRestart: !1\n              });\n            });\n          };\n        (0, t.useEffect)(() => {\n          if (a && w.current) {\n            w.current = !1;\n            const t = Object.keys(h),\n              e = Object.keys(f);\n            if (!t.every(t => e.includes(t))) throw new Error(\"`data` and `attributes` objects must have the same keys (roots).\");\n            const o = a.getFullData(),\n              r = a.getRootsAttributes(),\n              {\n                addedKeys: i,\n                removedKeys: n\n              } = W(o, h || {}),\n              s = t.some(t => void 0 !== o[t] && JSON.stringify(o[t]) !== JSON.stringify(h[t])),\n              d = e.filter(t => JSON.stringify(r[t]) !== JSON.stringify(f[t]));\n            a.model.change(t => {\n              _(i), k(n), s && O(), d.length && D(t, d);\n            });\n          }\n        }, [h, f]);\n        const W = (t, e) => {\n            const o = Object.keys(t),\n              r = Object.keys(e);\n            return {\n              addedKeys: r.filter(t => !o.includes(t)),\n              removedKeys: o.filter(t => !r.includes(t))\n            };\n          },\n          _ = t => {\n            t.forEach(t => {\n              a.addRoot(t, {\n                data: h[t] || \"\",\n                attributes: (null == f ? void 0 : f[t]) || {},\n                isUndoable: !0\n              });\n            });\n          },\n          k = t => {\n            t.forEach(t => {\n              a.detachRoot(t, !0);\n            });\n          },\n          O = () => {\n            a.data.set(h, {\n              suppressErrorInCollaboration: !0\n            });\n          },\n          D = (t, e) => {\n            e.forEach(e => {\n              Object.keys(f[e]).forEach(t => {\n                a.registerRootAttribute(t);\n              }), t.clearAttributes(a.model.document.getRoot(e)), t.setAttributes(f[e], a.model.document.getRoot(e));\n            });\n          },\n          j = (0, t.useCallback)(t => {\n            w.current = !0, u(t);\n          }, [u]),\n          S = (0, t.useCallback)(t => {\n            w.current = !0, y(t);\n          }, [y]);\n        return {\n          editor: a,\n          editableElements: m,\n          toolbarElement: e().createElement(g, {\n            editor: a\n          }),\n          data: h,\n          setData: j,\n          attributes: f,\n          setAttributes: S\n        };\n      };\n  })(), a;\n})());","map":{"version":3,"names":["t","e","exports","module","require","define","amd","CKEditor","react","self","o","i","n","r","__esModule","default","d","a","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","Symbol","toStringTag","value","Array","fill","map","toString","slice","createContext","c","Component","constructor","contextWatchdog","props","isLayoutReady","_initializeContextWatchdog","config","shouldComponentUpdate","_shouldComponentUpdate","id","destroy","children","render","createElement","Provider","componentWillUnmount","_destroyContext","s","ContextWatchdog","context","watchdogConfig","on","onError","error","phase","willContextRestart","causesRestart","state","onReady","create","catch","defaultProps","console","propTypes","string","bool","func","object","h","u","editorDestructionInProgress","domContainer","createRef","watchdog","CKEDITOR_VERSION","window","split","Number","warn","editor","disableWatchdog","instance","_shouldUpdateEditor","data","set","disabled","enableReadOnlyMode","disableReadOnlyMode","componentDidMount","_initializeEditor","componentDidUpdate","_destroyEditor","ref","_createEditor","current","_getConfig","l","_EditorWatchdog","setCreator","willEditorRestart","then","model","document","editing","view","onChange","onFocus","onBlur","setTimeout","Promise","initialData","contextType","isRequired","any","EditorWatchdog","_contextWatchdog","_id","Math","random","_creator","add","sourceElementOrData","creator","type","itemId","remove","resolve","getItem","p","g","EditorToolbarWrapper","useRef","useEffect","ui","toolbar","element","appendChild","removeChild","f","useContext","useState","y","rootsAttributes","m","b","w","v","x","getFullData","getRootsAttributes","keys","C","E","_createEditableElement","key","createEditable","addEditable","forceRender","R","disableTwoWayDataBinding","differ","getChanges","forEach","position","root","range","isAttached","rootName","getData","getChangedRoots","name","getRootAttributes","length","filter","detachEditable","every","includes","Error","addedKeys","removedKeys","W","some","JSON","stringify","change","_","k","O","D","_getStateDiff","addRoot","attributes","isUndoable","detachRoot","_updateEditorData","suppressErrorInCollaboration","_updateEditorAttributes","registerRootAttribute","clearAttributes","getRoot","setAttributes","j","useCallback","S","editableElements","toolbarElement","setData"],"sources":["webpack://CKEditor/webpack/universalModuleDefinition","webpack://CKEditor/external umd \"@ckeditor/ckeditor5-watchdog\"","webpack://CKEditor/external umd \"prop-types\"","webpack://CKEditor/external umd \"react\"","webpack://CKEditor/webpack/bootstrap","webpack://CKEditor/webpack/runtime/compat get default export","webpack://CKEditor/webpack/runtime/define property getters","webpack://CKEditor/webpack/runtime/hasOwnProperty shorthand","webpack://CKEditor/webpack/runtime/make namespace object","webpack://CKEditor/node_modules/@ckeditor/ckeditor5-utils/src/uid.js","webpack://CKEditor/src/ckeditorcontext.tsx","webpack://CKEditor/src/ckeditor.tsx","webpack://CKEditor/src/useMultiRootEditor.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"prop-types\"), require(\"@ckeditor/ckeditor5-watchdog\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"prop-types\", \"@ckeditor/ckeditor5-watchdog\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CKEditor\"] = factory(require(\"react\"), require(\"prop-types\"), require(\"@ckeditor/ckeditor5-watchdog\"));\n\telse\n\t\troot[\"CKEditor\"] = factory(root[\"react\"], root[\"prop-types\"], root[\"@ckeditor/ckeditor5-watchdog\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__155__, __WEBPACK_EXTERNAL_MODULE__949__, __WEBPACK_EXTERNAL_MODULE__546__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__546__;","module.exports = __WEBPACK_EXTERNAL_MODULE__949__;","module.exports = __WEBPACK_EXTERNAL_MODULE__155__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n/**\n * @module utils/uid\n */\n/**\n * A hash table of hex numbers to avoid using toString() in uid() which is costly.\n * [ '00', '01', '02', ..., 'fe', 'ff' ]\n */\nconst HEX_NUMBERS = new Array(256).fill('')\n    .map((_, index) => ('0' + (index).toString(16)).slice(-2));\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns An unique id string.\n */\nexport default function uid() {\n    // Let's create some positive random 32bit integers first.\n    //\n    // 1. Math.random() is a float between 0 and 1.\n    // 2. 0x100000000 is 2^32 = 4294967296.\n    // 3. >>> 0 enforces integer (in JS all numbers are floating point).\n    //\n    // For instance:\n    //\t\tMath.random() * 0x100000000 = 3366450031.853859\n    // but\n    //\t\tMath.random() * 0x100000000 >>> 0 = 3366450031.\n    const r1 = Math.random() * 0x100000000 >>> 0;\n    const r2 = Math.random() * 0x100000000 >>> 0;\n    const r3 = Math.random() * 0x100000000 >>> 0;\n    const r4 = Math.random() * 0x100000000 >>> 0;\n    // Make sure that id does not start with number.\n    return 'e' +\n        HEX_NUMBERS[r1 >> 0 & 0xFF] +\n        HEX_NUMBERS[r1 >> 8 & 0xFF] +\n        HEX_NUMBERS[r1 >> 16 & 0xFF] +\n        HEX_NUMBERS[r1 >> 24 & 0xFF] +\n        HEX_NUMBERS[r2 >> 0 & 0xFF] +\n        HEX_NUMBERS[r2 >> 8 & 0xFF] +\n        HEX_NUMBERS[r2 >> 16 & 0xFF] +\n        HEX_NUMBERS[r2 >> 24 & 0xFF] +\n        HEX_NUMBERS[r3 >> 0 & 0xFF] +\n        HEX_NUMBERS[r3 >> 8 & 0xFF] +\n        HEX_NUMBERS[r3 >> 16 & 0xFF] +\n        HEX_NUMBERS[r3 >> 24 & 0xFF] +\n        HEX_NUMBERS[r4 >> 0 & 0xFF] +\n        HEX_NUMBERS[r4 >> 8 & 0xFF] +\n        HEX_NUMBERS[r4 >> 16 & 0xFF] +\n        HEX_NUMBERS[r4 >> 24 & 0xFF];\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport React, { type ReactNode } from 'react';\nimport PropTypes, { type InferProps, type Validator } from 'prop-types';\n\nimport { ContextWatchdog } from '@ckeditor/ckeditor5-watchdog';\nimport type { WatchdogConfig } from '@ckeditor/ckeditor5-watchdog/src/watchdog';\n\nimport type { Context, ContextConfig } from '@ckeditor/ckeditor5-core';\n\nexport const ContextWatchdogContext = React.createContext<ContextWatchdog | 'contextWatchdog' | null>( 'contextWatchdog' );\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport default class CKEditorContext<TContext extends Context = Context> extends React.Component<Props<TContext>, {}> {\n\tpublic contextWatchdog: ContextWatchdog<TContext> | null = null;\n\n\tconstructor( props: Props<TContext>, context: any ) {\n\t\tsuper( props, context );\n\n\t\tif ( this.props.isLayoutReady ) {\n\t\t\tthis._initializeContextWatchdog( this.props.config );\n\t\t}\n\t}\n\n\tpublic override shouldComponentUpdate( nextProps: Readonly<Props<TContext> & { children?: ReactNode | undefined }> ): boolean {\n\t\treturn this._shouldComponentUpdate( nextProps ) as unknown as boolean;\n\t}\n\n\t/**\n\t * Wrapper for the async handler. Note that this is an implementation bug, see https://github.com/ckeditor/ckeditor5-react/issues/312.\n\t */\n\tprivate async _shouldComponentUpdate( nextProps: Readonly<Props<TContext> & { children?: ReactNode | undefined }> ): Promise<boolean> {\n\t\t// If the configuration changes then the ContextWatchdog needs to be destroyed and recreated\n\t\t// On top of the new configuration.\n\t\tif ( nextProps.id !== this.props.id ) {\n\t\t\t/* istanbul ignore else */\n\t\t\tif ( this.contextWatchdog ) {\n\t\t\t\tawait this.contextWatchdog.destroy();\n\t\t\t}\n\n\t\t\tawait this._initializeContextWatchdog( nextProps.config );\n\t\t}\n\n\t\tif ( nextProps.isLayoutReady && !this.contextWatchdog ) {\n\t\t\tawait this._initializeContextWatchdog( nextProps.config );\n\n\t\t\treturn true;\n\t\t}\n\n\t\t// Rerender the component only when children has changed.\n\t\treturn this.props.children !== nextProps.children;\n\t}\n\n\tpublic override render(): ReactNode {\n\t\treturn (\n\t\t\t<ContextWatchdogContext.Provider value={ this.contextWatchdog }>\n\t\t\t\t{ this.props.children }\n\t\t\t</ContextWatchdogContext.Provider>\n\t\t);\n\t}\n\n\tpublic override componentWillUnmount(): void {\n\t\tthis._destroyContext();\n\t}\n\n\tprivate async _initializeContextWatchdog( config?: ContextConfig ): Promise<void> {\n\t\tthis.contextWatchdog = new ContextWatchdog( this.props.context!, this.props.watchdogConfig );\n\n\t\tthis.contextWatchdog.on( 'error', ( _, errorEvent ) => {\n\t\t\tthis.props.onError( errorEvent.error, {\n\t\t\t\tphase: 'runtime',\n\t\t\t\twillContextRestart: errorEvent.causesRestart\n\t\t\t} );\n\t\t} );\n\n\t\tthis.contextWatchdog.on( 'stateChange', () => {\n\t\t\tif ( this.contextWatchdog!.state === 'ready' && this.props.onReady ) {\n\t\t\t\tthis.props.onReady( this.contextWatchdog!.context! );\n\t\t\t}\n\t\t} );\n\n\t\tawait this.contextWatchdog.create( config )\n\t\t\t.catch( error => {\n\t\t\t\tthis.props.onError( error, {\n\t\t\t\t\tphase: 'initialization',\n\t\t\t\t\twillContextRestart: false\n\t\t\t\t} );\n\t\t\t} );\n\t}\n\n\tprivate async _destroyContext(): Promise<void> {\n\t\tif ( this.contextWatchdog ) {\n\t\t\tawait this.contextWatchdog.destroy();\n\t\t\tthis.contextWatchdog = null;\n\t\t}\n\t}\n\n\tpublic static defaultProps: Partial<Props<Context>> = {\n\t\tisLayoutReady: true,\n\t\tonError: ( error, details ) => console.error( error, details )\n\t};\n\n\tpublic static propTypes = {\n\t\tid: PropTypes.string,\n\t\tisLayoutReady: PropTypes.bool,\n\t\tcontext: PropTypes.func as unknown as Validator<{ create( ...args: any ): Promise<any> } | undefined>,\n\t\twatchdogConfig: PropTypes.object,\n\t\tconfig: PropTypes.object,\n\t\tonReady: PropTypes.func,\n\t\tonError: PropTypes.func\n\t};\n}\n\ninterface Props<TContext extends Context> extends InferProps<typeof CKEditorContext.propTypes> {\n\tcontext?: { create( ...args: any ): Promise<TContext> };\n\twatchdogConfig?: WatchdogConfig;\n\tconfig?: ContextConfig;\n\tonReady?: ( context: Context ) => void; // TODO this should accept TContext (after ContextWatchdog release).\n\tonError: ( error: Error, details: ErrorDetails ) => void;\n\tchildren?: ReactNode;\n}\n\ninterface ErrorDetails {\n\tphase: 'initialization' | 'runtime';\n\twillContextRestart: boolean;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/* globals window */\n\nimport React from 'react';\nimport PropTypes, { type InferProps, type Validator } from 'prop-types';\n\nimport uid from '@ckeditor/ckeditor5-utils/src/uid';\n\nimport type { EventInfo } from '@ckeditor/ckeditor5-utils';\nimport type { Editor, EditorConfig } from '@ckeditor/ckeditor5-core';\nimport type { DocumentChangeEvent } from '@ckeditor/ckeditor5-engine';\n\nimport { EditorWatchdog, ContextWatchdog } from '@ckeditor/ckeditor5-watchdog';\nimport type { WatchdogConfig } from '@ckeditor/ckeditor5-watchdog/src/watchdog';\nimport type { EditorCreatorFunction } from '@ckeditor/ckeditor5-watchdog/src/editorwatchdog';\n\nimport { ContextWatchdogContext } from './ckeditorcontext';\n\nconst REACT_INTEGRATION_READ_ONLY_LOCK_ID = 'Lock from React integration (@ckeditor/ckeditor5-react)';\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport default class CKEditor<TEditor extends Editor> extends React.Component<Props<TEditor>, {}> {\n\t/**\n\t * Contains a promise that resolves when the editor destruction is finished.\n\t */\n\tprivate editorDestructionInProgress: Promise<void> | null = null;\n\n\t/**\n\t * After mounting the editor, the variable will contain a reference to the created editor.\n\t * @see: https://ckeditor.com/docs/ckeditor5/latest/api/module_core_editor_editor-Editor.html\n\t */\n\tprivate domContainer = React.createRef<HTMLDivElement>();\n\n\t/**\n\t * An instance of EditorWatchdog or an instance of EditorWatchdog-like adapter for ContextWatchdog.\n\t * It holds the instance of the editor under `this.watchdog.editor` if `props.disableWatchdog` is set to false.\n\t */\n\tprivate watchdog: EditorWatchdog<TEditor> | EditorWatchdogAdapter<TEditor> | null = null;\n\n\t/**\n\t * Holds the instance of the editor if `props.disableWatchdog` is set to true.\n\t */\n\tprivate instance: Editor | undefined | null;\n\n\tconstructor( props: Props<TEditor> ) {\n\t\tsuper( props );\n\n\t\tconst { CKEDITOR_VERSION } = window;\n\n\t\tif ( CKEDITOR_VERSION ) {\n\t\t\tconst [ major ] = CKEDITOR_VERSION.split( '.' ).map( Number );\n\n\t\t\tif ( major < 37 ) {\n\t\t\t\tconsole.warn( 'The <CKEditor> component requires using CKEditor 5 in version 37 or higher.' );\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn( 'Cannot find the \"CKEDITOR_VERSION\" in the \"window\" scope.' );\n\t\t}\n\t}\n\n\t/**\n\t * An editor instance.\n\t */\n\tpublic get editor(): Editor | null {\n\t\tif ( this.props.disableWatchdog ) {\n\t\t\treturn this.instance!;\n\t\t}\n\n\t\tif ( !this.watchdog ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.watchdog.editor;\n\t}\n\n\t/**\n\t * The CKEditor component should not be updated by React itself.\n\t * However, if the component identifier changes, the whole structure should be created once again.\n\t */\n\tpublic override shouldComponentUpdate( nextProps: Readonly<Props<TEditor>> ): boolean {\n\t\tif ( !this.editor ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Only when the component identifier changes the whole structure should be re-created once again.\n\t\tif ( nextProps.id !== this.props.id ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( nextProps.disableWatchdog !== this.props.disableWatchdog ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this._shouldUpdateEditor( nextProps ) ) {\n\t\t\tthis.editor.data.set( nextProps.data! );\n\t\t}\n\n\t\tif ( 'disabled' in nextProps ) {\n\t\t\tif ( nextProps.disabled ) {\n\t\t\t\tthis.editor.enableReadOnlyMode( REACT_INTEGRATION_READ_ONLY_LOCK_ID );\n\t\t\t} else {\n\t\t\t\tthis.editor.disableReadOnlyMode( REACT_INTEGRATION_READ_ONLY_LOCK_ID );\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Initialize the editor when the component is mounted.\n\t */\n\tpublic override async componentDidMount(): Promise<void> {\n\t\tawait this._initializeEditor();\n\t}\n\n\t/**\n\t * Re-render the entire component once again. The old editor will be destroyed and the new one will be created.\n\t */\n\tpublic override async componentDidUpdate(): Promise<void> {\n\t\tawait this._destroyEditor();\n\t\tawait this._initializeEditor();\n\t}\n\n\t/**\n\t * Destroy the editor before unmounting the component.\n\t */\n\tpublic override async componentWillUnmount(): Promise<void> {\n\t\tawait this._destroyEditor();\n\t}\n\n\t/**\n\t * Render a <div> element which will be replaced by CKEditor.\n\t */\n\tpublic override render(): React.ReactNode {\n\t\treturn (\n\t\t\t<div ref={ this.domContainer }></div>\n\t\t);\n\t}\n\n\t/**\n\t * Initializes the editor by creating a proper watchdog and initializing it with the editor's configuration.\n\t */\n\tprivate async _initializeEditor(): Promise<unknown> {\n\t\tawait this.editorDestructionInProgress;\n\n\t\tif ( this.props.disableWatchdog ) {\n\t\t\tthis.instance = await this._createEditor( this.domContainer.current!, this._getConfig() );\n\t\t\treturn;\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\tif ( this.watchdog ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.context instanceof ContextWatchdog ) {\n\t\t\tthis.watchdog = new EditorWatchdogAdapter( this.context );\n\t\t} else {\n\t\t\tthis.watchdog = new CKEditor._EditorWatchdog( this.props.editor, this.props.watchdogConfig );\n\t\t}\n\n\t\tthis.watchdog.setCreator( ( el, config ) => this._createEditor( el as any, config ) );\n\n\t\tthis.watchdog.on( 'error', ( _, { error, causesRestart } ) => {\n\t\t\tconst onError = this.props.onError || console.error;\n\t\t\tonError( error, { phase: 'runtime', willEditorRestart: causesRestart } );\n\t\t} );\n\n\t\tawait this.watchdog\n\t\t\t.create( this.domContainer.current!, this._getConfig() )\n\t\t\t.catch( error => {\n\t\t\t\tconst onError = this.props.onError || console.error;\n\t\t\t\tonError( error, { phase: 'initialization', willEditorRestart: false } );\n\t\t\t} );\n\t}\n\n\t/**\n\t * Creates an editor from the element and configuration.\n\t *\n\t * @param element The source element.\n\t * @param config CKEditor 5 editor configuration.\n\t */\n\tprivate _createEditor( element: HTMLElement | string | Record<string, string>, config: EditorConfig ): Promise<TEditor> {\n\t\treturn this.props.editor.create( element as HTMLElement, config )\n\t\t\t.then( editor => {\n\t\t\t\tif ( 'disabled' in this.props ) {\n\t\t\t\t\t// Switch to the read-only mode if the `[disabled]` attribute is specified.\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.disabled ) {\n\t\t\t\t\t\teditor.enableReadOnlyMode( REACT_INTEGRATION_READ_ONLY_LOCK_ID );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst modelDocument = editor.model.document;\n\t\t\t\tconst viewDocument = editor.editing.view.document;\n\n\t\t\t\tmodelDocument.on<DocumentChangeEvent>( 'change:data', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.onChange ) {\n\t\t\t\t\t\tthis.props.onChange( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tviewDocument.on( 'focus', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.onFocus ) {\n\t\t\t\t\t\tthis.props.onFocus( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tviewDocument.on( 'blur', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( this.props.onBlur ) {\n\t\t\t\t\t\tthis.props.onBlur( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// The `onReady` callback should be fired once the `editor` property\n\t\t\t\t// can be reached from the `<CKEditor>` component.\n\t\t\t\t// Ideally this part should be moved to the watchdog item creator listeners.\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tif ( this.props.onReady ) {\n\t\t\t\t\t\tthis.props.onReady( editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn editor;\n\t\t\t} );\n\t}\n\n\t/**\n\t * Destroys the editor by destroying the watchdog.\n\t */\n\tprivate async _destroyEditor(): Promise<void> {\n\t\tthis.editorDestructionInProgress = new Promise<void>( resolve => {\n\t\t\t// It may happen during the tests that the watchdog instance is not assigned before destroying itself. See: #197.\n\t\t\t//\n\t\t\t// Additionally, we need to find a way to detect if the whole context has been destroyed. As `componentWillUnmount()`\n\t\t\t// could be fired by <CKEditorContext /> and <CKEditor /> at the same time, this `setTimeout()` makes sure\n\t\t\t// that <CKEditorContext /> component will be destroyed first, so during the code execution\n\t\t\t// the `ContextWatchdog#state` would have a correct value. See `EditorWatchdogAdapter#destroy()` for more information.\n\t\t\t/* istanbul ignore next */\n\t\t\tsetTimeout( async () => {\n\t\t\t\tif ( this.watchdog ) {\n\t\t\t\t\tawait this.watchdog.destroy();\n\t\t\t\t\tthis.watchdog = null;\n\t\t\t\t\treturn resolve();\n\t\t\t\t}\n\n\t\t\t\tif ( this.instance ) {\n\t\t\t\t\tawait this.instance.destroy();\n\t\t\t\t\tthis.instance = null;\n\t\t\t\t\treturn resolve();\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Returns true when the editor should be updated.\n\t *\n\t * @param nextProps React's properties.\n\t */\n\tprivate _shouldUpdateEditor( nextProps: Readonly<Props<TEditor>> ): boolean {\n\t\t// Check whether `nextProps.data` is equal to `this.props.data` is required if somebody defined the `#data`\n\t\t// property as a static string and updated a state of component when the editor's content has been changed.\n\t\t// If we avoid checking those properties, the editor's content will back to the initial value because\n\t\t// the state has been changed and React will call this method.\n\t\tif ( this.props.data === nextProps.data ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We should not change data if the editor's content is equal to the `#data` property.\n\t\tif ( this.editor!.data.get() === nextProps.data ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Returns the editor configuration.\n\t */\n\tprivate _getConfig(): EditorConfig {\n\t\tconst config = this.props.config || {};\n\n\t\tif ( this.props.data && config.initialData ) {\n\t\t\tconsole.warn(\n\t\t\t\t'Editor data should be provided either using `config.initialData` or `content` property. ' +\n\t\t\t\t'The config value takes precedence over `content` property and will be used when both are specified.'\n\t\t\t);\n\t\t}\n\n\t\t// Merge two possible ways of providing data into the `config.initialData` field.\n\t\treturn {\n\t\t\t...config,\n\t\t\tinitialData: config.initialData || this.props.data || ''\n\t\t};\n\t}\n\n\tpublic static override contextType = ContextWatchdogContext;\n\n\t// Properties definition.\n\tpublic static propTypes = {\n\t\teditor: PropTypes.func.isRequired as unknown as Validator<{ create( ...args: any ): Promise<any> }>,\n\t\tdata: PropTypes.string,\n\t\tconfig: PropTypes.object,\n\t\tdisableWatchdog: PropTypes.bool,\n\t\twatchdogConfig: PropTypes.object,\n\t\tonChange: PropTypes.func,\n\t\tonReady: PropTypes.func,\n\t\tonFocus: PropTypes.func,\n\t\tonBlur: PropTypes.func,\n\t\tonError: PropTypes.func,\n\t\tdisabled: PropTypes.bool,\n\t\tid: PropTypes.any\n\t};\n\n\t// Store the API in the static property to easily overwrite it in tests.\n\t// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\n\tpublic static _EditorWatchdog = EditorWatchdog;\n}\n\n/**\n * TODO this is type space definition for props, the CKEditor.propTypes is a run-time props validation that should match.\n */\ninterface Props<TEditor extends Editor> extends InferProps<typeof CKEditor.propTypes> {\n\teditor: { create( ...args: any ): Promise<TEditor> };\n\tconfig?: EditorConfig;\n\twatchdogConfig?: WatchdogConfig;\n\tdisableWatchdog?: boolean;\n\tonReady?: ( editor: TEditor ) => void;\n\tonError?: ( error: Error, details: ErrorDetails ) => void;\n\tonChange?: ( event: EventInfo, editor: TEditor ) => void;\n\tonFocus?: ( event: EventInfo, editor: TEditor ) => void;\n\tonBlur?: ( event: EventInfo, editor: TEditor ) => void;\n}\n\ninterface ErrorDetails {\n\tphase: 'initialization' | 'runtime';\n\twillEditorRestart?: boolean;\n}\n\n/**\n * An adapter aligning the context watchdog API to the editor watchdog API for easier usage.\n */\nexport class EditorWatchdogAdapter<TEditor extends Editor> {\n\t/**\n\t * The context watchdog instance that will be wrapped into editor watchdog API.\n\t */\n\tprivate readonly _contextWatchdog: ContextWatchdog;\n\n\t/**\n\t * A unique id for the adapter to distinguish editor items when using the context watchdog API.\n\t */\n\tprivate readonly _id: string;\n\n\t/**\n\t * A watchdog's editor creator function.\n\t */\n\tprivate _creator?: EditorCreatorFunction;\n\n\t/**\n\t * @param contextWatchdog The context watchdog instance that will be wrapped into editor watchdog API.\n\t */\n\tconstructor( contextWatchdog: ContextWatchdog ) {\n\t\tthis._contextWatchdog = contextWatchdog;\n\t\tthis._id = uid();\n\t}\n\n\t/**\n\t *  @param creator A watchdog's editor creator function.\n\t */\n\tpublic setCreator( creator: EditorCreatorFunction ): void {\n\t\tthis._creator = creator;\n\t}\n\n\t/**\n\t * Adds an editor configuration to the context watchdog registry. Creates an instance of it.\n\t *\n\t * @param sourceElementOrData A source element or data for the new editor.\n\t * @param config CKEditor 5 editor config.\n\t */\n\tpublic create( sourceElementOrData: HTMLElement | string, config: EditorConfig ): Promise<unknown> {\n\t\treturn this._contextWatchdog.add( {\n\t\t\tsourceElementOrData,\n\t\t\tconfig,\n\t\t\tcreator: this._creator!,\n\t\t\tid: this._id,\n\t\t\ttype: 'editor'\n\t\t} );\n\t}\n\n\t/**\n\t * Creates a listener that is attached to context watchdog's item and run when the context watchdog fires.\n\t * Currently works only for the `error` event.\n\t */\n\tpublic on( _: string, callback: ( _: null, data: { error: Error; causesRestart?: boolean } ) => void ): void {\n\t\t// Assume that the event name was error.\n\t\tthis._contextWatchdog.on( 'itemError', ( _, { itemId, error } ) => {\n\t\t\tif ( itemId === this._id ) {\n\t\t\t\tcallback( null, { error, causesRestart: undefined } );\n\t\t\t}\n\t\t} );\n\t}\n\n\tpublic destroy(): Promise<unknown> {\n\t\t// Destroying an editor instance after destroying the Context is handled in the `ContextWatchdog` class.\n\t\t// As `EditorWatchdogAdapter` is an adapter, we should not destroy the editor manually.\n\t\t// Otherwise, it causes that the editor is destroyed twice. However, there is a case, when the editor\n\t\t// needs to be removed from the context, without destroying the context itself. We may assume the following\n\t\t// relations with `ContextWatchdog#state`:\n\t\t//\n\t\t// a) `ContextWatchdog#state` === 'ready' - context is not destroyed; it's safe to destroy the editor manually.\n\t\t// b) `ContextWatchdog#state` === 'destroyed' - context is destroyed; let `ContextWatchdog` handle the whole process.\n\t\t//\n\t\t// See #354 for more information.\n\t\tif ( this._contextWatchdog.state === 'ready' ) {\n\t\t\treturn this._contextWatchdog.remove( this._id );\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * An editor instance.\n\t */\n\tpublic get editor(): TEditor {\n\t\treturn this._contextWatchdog.getItem( this._id ) as TEditor;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport React, { useState, useEffect, useRef, type Dispatch, type SetStateAction, useContext, useCallback } from 'react';\n\nimport type { EditorConfig } from '@ckeditor/ckeditor5-core';\nimport type { DocumentChangeEvent, Writer, RootElement } from '@ckeditor/ckeditor5-engine';\n\nimport { ContextWatchdog, EditorWatchdog } from '@ckeditor/ckeditor5-watchdog';\nimport type { WatchdogConfig } from '@ckeditor/ckeditor5-watchdog/src/watchdog';\n\nimport type { AddRootEvent, DetachRootEvent } from '@ckeditor/ckeditor5-editor-multi-root/src/multirooteditor';\nimport type MultiRootEditor from '@ckeditor/ckeditor5-build-multi-root';\nimport type EventInfo from '@ckeditor/ckeditor5-utils/src/eventinfo';\n\nimport { ContextWatchdogContext } from './ckeditorcontext';\nimport { EditorWatchdogAdapter } from './ckeditor';\n\nconst REACT_INTEGRATION_READ_ONLY_LOCK_ID = 'Lock from React integration (@ckeditor/ckeditor5-react)';\n\n/* eslint-disable @typescript-eslint/no-use-before-define */\nconst useMultiRootEditor = ( props: MultiRootHookProps ): MultiRootHookReturns => {\n\tconst watchdog = useRef<EditorWatchdog | EditorWatchdogAdapter<MultiRootEditor> | null>( null );\n\n\tconst editorDestructionInProgress = useRef<Promise<void> | null>( null );\n\n\tconst context = useContext( ContextWatchdogContext );\n\n\t// Current editor instance. It may change if the editor is re-initialized by the Watchdog after an error.\n\tconst [ editor, setEditor ] = useState<MultiRootEditor | null>( null );\n\n\t// Current editor data. An object where each key is a root name and the value is the root content.\n\tconst [ data, setData ] = useState<Record<string, string>>( props.data );\n\n\t// Current roots attributes. An object where each key is a root name and the value is an object with root attributes.\n\tconst [ attributes, setAttributes ] = useState<Record<string, Record<string, unknown>>>( props.rootsAttributes || {} );\n\n\t// Contains the JSX elements for each editor root.\n\tconst [ elements, setElements ] = useState<Array<JSX.Element>>( [] );\n\n\tconst shouldUpdateEditor = useRef<boolean>( true );\n\n\tuseEffect( () => {\n\t\tconst initEditor = async () => {\n\t\t\t// When the component has been remounted it is crucial to wait for removing the old editor\n\t\t\t// and cleaning the old state.\n\t\t\tawait editorDestructionInProgress.current;\n\n\t\t\tif ( props.isLayoutReady !== false ) {\n\t\t\t\tawait _initializeEditor();\n\t\t\t}\n\t\t};\n\n\t\tinitEditor();\n\n\t\treturn () => {\n\t\t\t_destroyEditor().then( () => {\n\t\t\t\teditorDestructionInProgress.current = null;\n\t\t\t} );\n\t\t};\n\t}, [ props.isLayoutReady ] );\n\n\tuseEffect( () => {\n\t\tif ( editor ) {\n\t\t\tif ( props.disabled ) {\n\t\t\t\teditor.enableReadOnlyMode( REACT_INTEGRATION_READ_ONLY_LOCK_ID );\n\t\t\t} else {\n\t\t\t\teditor.disableReadOnlyMode( REACT_INTEGRATION_READ_ONLY_LOCK_ID );\n\t\t\t}\n\t\t}\n\t}, [ props.disabled ] );\n\n\tuseEffect( () => {\n\t\t// When the component has been remounted, keeping the old state, it is important to avoid\n\t\t// updating the editor, which will be destroyed by the unmount callback.\n\t\tif ( editor && !editorDestructionInProgress.current ) {\n\t\t\tconst editorData = editor.getFullData();\n\n\t\t\tsetData( { ...editorData } );\n\t\t\tsetAttributes( { ...editor.getRootsAttributes() } );\n\t\t\tsetElements( [\n\t\t\t\t...Object.keys( editorData ).map( rootName => _createEditableElement( editor, rootName ) )\n\t\t\t] );\n\t\t}\n\t}, [ editor && editor.id ] );\n\n\t/**\n\t * Returns the editor configuration.\n\t */\n\tconst _getConfig = (): EditorConfig => {\n\t\tconst config = props.config || {};\n\n\t\tif ( props.data && config.initialData ) {\n\t\t\tconsole.warn(\n\t\t\t\t'Editor data should be provided either using `config.initialData` or `data` property. ' +\n\t\t\t\t'The config value takes precedence over `data` property and will be used when both are specified.'\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t...config,\n\t\t\trootsAttributes: attributes\n\t\t};\n\t};\n\n\t/**\n\t * Callback function for handling changed data and attributes in the editor.\n\t */\n\tconst onChangeData = ( editor: MultiRootEditor, event: EventInfo ): void => {\n\t\tconst modelDocument = editor!.model.document;\n\n\t\tif ( !props.disableTwoWayDataBinding ) {\n\t\t\tconst newData: Record<string, string> = {};\n\t\t\tconst newAttributes: Record<string, Record<string, unknown>> = {};\n\n\t\t\tmodelDocument.differ.getChanges()\n\t\t\t\t.forEach( change => {\n\t\t\t\t\tlet root: RootElement;\n\n\t\t\t\t\tif ( change.type == 'insert' || change.type == 'remove' ) {\n\t\t\t\t\t\troot = change.position.root as RootElement;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Must be `attribute` diff item.\n\t\t\t\t\t\troot = change.range.root as RootElement;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Getting data from a not attached root will trigger a warning.\n\t\t\t\t\t// There is another callback for handling detached roots.\n\t\t\t\t\tif ( !root.isAttached() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { rootName } = root;\n\n\t\t\t\t\tnewData[ rootName ] = editor!.getData( { rootName } );\n\t\t\t\t} );\n\n\t\t\tmodelDocument.differ.getChangedRoots()\n\t\t\t\t.forEach( changedRoot => {\n\t\t\t\t\t// Ignore added and removed roots. They are handled by a different function.\n\t\t\t\t\t// Only register if roots attributes changed.\n\t\t\t\t\tif ( changedRoot.state ) {\n\t\t\t\t\t\tif ( newData[ changedRoot.name ] !== undefined ) {\n\t\t\t\t\t\t\tdelete newData[ changedRoot.name ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst rootName = changedRoot.name;\n\n\t\t\t\t\tnewAttributes[ rootName ] = editor!.getRootAttributes( rootName );\n\t\t\t\t} );\n\n\t\t\tif ( Object.keys( newData ).length ) {\n\t\t\t\tsetData( previousData => ( { ...previousData, ...newData } ) );\n\t\t\t}\n\n\t\t\tif ( Object.keys( newAttributes ).length ) {\n\t\t\t\tsetAttributes( previousAttributes => ( { ...previousAttributes, ...newAttributes } ) );\n\t\t\t}\n\t\t}\n\n\t\t/* istanbul ignore else */\n\t\tif ( props.onChange ) {\n\t\t\tprops.onChange( event, editor! );\n\t\t}\n\t};\n\n\t/**\n\t * Callback function for handling an added root.\n\t */\n\tconst onAddRoot = ( editor: MultiRootEditor, evt: EventInfo, root: RootElement ): void => {\n\t\tconst rootName = root.rootName;\n\n\t\tconst reactElement = _createEditableElement( editor, rootName );\n\n\t\tif ( !props.disableTwoWayDataBinding ) {\n\t\t\tsetData( previousData =>\n\t\t\t\t( { ...previousData, [ rootName ]: editor!.getData( { rootName } ) } )\n\t\t\t);\n\n\t\t\tsetAttributes( previousAttributes =>\n\t\t\t\t( { ...previousAttributes, [ rootName ]: editor!.getRootAttributes( rootName ) } )\n\t\t\t);\n\t\t}\n\n\t\tsetElements( previousElements => [ ...previousElements, reactElement ] );\n\t};\n\n\t/**\n\t * Callback function for handling a detached root.\n\t */\n\tconst onDetachRoot = ( editor: MultiRootEditor, evt: EventInfo, root: RootElement ): void => {\n\t\tconst rootName = root.rootName;\n\n\t\tsetElements( previousElements => previousElements.filter( element => element.props.id !== rootName ) );\n\n\t\tif ( !props.disableTwoWayDataBinding ) {\n\t\t\tsetData( previousData => {\n\t\t\t\tconst { [ rootName! ]: _, ...newData } = previousData;\n\n\t\t\t\treturn { ...newData };\n\t\t\t} );\n\n\t\t\tsetAttributes( previousAttributes => {\n\t\t\t\tconst { [ rootName! ]: _, ...newAttributes } = previousAttributes;\n\n\t\t\t\treturn { ...newAttributes };\n\t\t\t} );\n\t\t}\n\n\t\teditor!.detachEditable( root );\n\t};\n\n\t/**\n\t * Creates a React element on which the root editable element is initialized.\n\t */\n\tconst _createEditableElement = ( editor: MultiRootEditor, rootName: string ): JSX.Element => (\n\t\t<div\n\t\t\tid={rootName}\n\t\t\tkey={rootName}\n\t\t\tref={ el => {\n\t\t\t\tif ( el ) {\n\t\t\t\t\tconst editable = editor.ui.view.createEditable( rootName, el );\n\n\t\t\t\t\teditor.ui.addEditable( editable );\n\n\t\t\t\t\teditor.editing.view.forceRender();\n\t\t\t\t}\n\t\t\t}}\n\t\t></div>\n\t);\n\n\t/**\n\t * Creates an editor using initial elements or data, and configuration.\n\t *\n\t * @param initialData The initial data.\n\t * @param config CKEditor 5 editor configuration.\n\t */\n\tconst _createEditor = (\n\t\tinitialData: Record<string, string> | Record<string, HTMLElement>,\n\t\tconfig: EditorConfig\n\t): Promise<MultiRootEditor> => {\n\t\treturn props.editor.create( initialData, config )\n\t\t\t.then( ( editor: MultiRootEditor ) => {\n\t\t\t\tif ( props.disabled ) {\n\t\t\t\t\t// Switch to the read-only mode if the `[disabled]` attribute is specified.\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( props.disabled ) {\n\t\t\t\t\t\teditor.enableReadOnlyMode( REACT_INTEGRATION_READ_ONLY_LOCK_ID );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst modelDocument = editor.model.document;\n\t\t\t\tconst viewDocument = editor.editing.view.document;\n\n\t\t\t\tmodelDocument.on<DocumentChangeEvent>( 'change:data', evt => onChangeData( editor, evt ) );\n\n\t\t\t\teditor.on<AddRootEvent>( 'addRoot', ( evt, root ) => onAddRoot( editor, evt, root ) );\n\t\t\t\teditor.on<DetachRootEvent>( 'detachRoot', ( evt, root ) => onDetachRoot( editor, evt, root ) );\n\n\t\t\t\tviewDocument.on( 'focus', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( props.onFocus ) {\n\t\t\t\t\t\tprops.onFocus( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tviewDocument.on( 'blur', event => {\n\t\t\t\t\t/* istanbul ignore else */\n\t\t\t\t\tif ( props.onBlur ) {\n\t\t\t\t\t\tprops.onBlur( event, editor );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tsetEditor( editor );\n\n\t\t\t\tif ( props.onReady ) {\n\t\t\t\t\tprops.onReady( editor );\n\t\t\t\t}\n\n\t\t\t\treturn editor;\n\t\t\t} );\n\t};\n\n\t/**\n\t * Destroys the editor by destroying the watchdog.\n\t */\n\tconst _destroyEditor = async (): Promise<void> => {\n\t\tsetEditor( null );\n\t\tsetData( {} );\n\t\tsetAttributes( {} );\n\t\tsetElements( [] );\n\n\t\teditorDestructionInProgress.current = new Promise<void>( resolve => {\n\t\t\t// It may happen during the tests that the watchdog instance is not assigned before destroying itself. See: #197.\n\t\t\t//\n\t\t\t// Additionally, we need to find a way to detect if the whole context has been destroyed. As `componentWillUnmount()`\n\t\t\t// could be fired by <CKEditorContext /> and <CKEditor /> at the same time, this `setTimeout()` makes sure\n\t\t\t// that <CKEditorContext /> component will be destroyed first, so during the code execution\n\t\t\t// the `ContextWatchdog#state` would have a correct value. See `EditorWatchdogAdapter#destroy()` for more information.\n\t\t\t/* istanbul ignore next */\n\t\t\tsetTimeout( async () => {\n\t\t\t\tif ( watchdog.current ) {\n\t\t\t\t\tawait watchdog.current.destroy();\n\t\t\t\t\twatchdog.current = null;\n\n\t\t\t\t\treturn resolve();\n\t\t\t\t}\n\n\t\t\t\tif ( editor ) {\n\t\t\t\t\tawait editor.destroy();\n\n\t\t\t\t\treturn resolve();\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t} );\n\t\t} );\n\t};\n\n\t/**\n\t * Initializes the editor by creating a proper watchdog and initializing it with the editor's configuration.\n\t */\n\tconst _initializeEditor = async (): Promise<void> => {\n\t\tif ( props.disableWatchdog ) {\n\t\t\tawait _createEditor( props.data, _getConfig() );\n\n\t\t\treturn;\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\tif ( watchdog.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( context instanceof ContextWatchdog ) {\n\t\t\twatchdog.current = new EditorWatchdogAdapter( context );\n\t\t} else {\n\t\t\twatchdog.current = new EditorWatchdog( props.editor, props.watchdogConfig );\n\t\t}\n\n\t\tconst watchdogInstance = watchdog.current;\n\n\t\twatchdogInstance.setCreator( ( data, config ) => _createEditor( data as Record<string, string>, config ) );\n\n\t\twatchdogInstance.on( 'error', ( _, { error, causesRestart } ) => {\n\t\t\tconst onError = props.onError || console.error;\n\n\t\t\tonError( error, { phase: 'runtime', willEditorRestart: causesRestart } );\n\t\t} );\n\n\t\tawait watchdogInstance\n\t\t\t.create( data as any, _getConfig() )\n\t\t\t.catch( error => {\n\t\t\t\tconst onError = props.onError || console.error;\n\n\t\t\t\tonError( error, { phase: 'initialization', willEditorRestart: false } );\n\t\t\t} );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( !editor ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Editor should be only updated when the changes come from the integrator React application.\n\t\tif ( shouldUpdateEditor.current ) {\n\t\t\tshouldUpdateEditor.current = false;\n\n\t\t\tconst dataKeys = Object.keys( data );\n\t\t\tconst attributesKeys = Object.keys( attributes );\n\n\t\t\t// Check if `data` and `attributes` have the same keys.\n\t\t\t//\n\t\t\t// It prevents the addition of attributes for non-existing roots.\n\t\t\t// If the `data` object has a different set of keys, an error will not be thrown\n\t\t\t// since the attributes will be removed/added during root initialization/destruction.\n\t\t\tif ( !dataKeys.every( key => attributesKeys.includes( key ) ) ) {\n\t\t\t\tthrow new Error( '`data` and `attributes` objects must have the same keys (roots).' );\n\t\t\t}\n\n\t\t\tconst editorData = editor.getFullData();\n\t\t\tconst editorAttributes = editor.getRootsAttributes();\n\n\t\t\tconst {\n\t\t\t\taddedKeys: newRoots,\n\t\t\t\tremovedKeys: removedRoots\n\t\t\t} = _getStateDiff( editorData, data || {} );\n\n\t\t\tconst hasModifiedData = dataKeys.some( rootName =>\n\t\t\t\teditorData[ rootName ] !== undefined &&\n\t\t\t\tJSON.stringify( editorData[ rootName ] ) !== JSON.stringify( data[ rootName ] )\n\t\t\t);\n\n\t\t\tconst rootsWithChangedAttributes = attributesKeys.filter( rootName =>\n\t\t\t\tJSON.stringify( editorAttributes[ rootName ] ) !== JSON.stringify( attributes[ rootName ] ) );\n\n\t\t\teditor.model.change( writer => {\n\t\t\t\t_handleNewRoots( newRoots );\n\t\t\t\t_handleRemovedRoots( removedRoots );\n\n\t\t\t\tif ( hasModifiedData ) {\n\t\t\t\t\t_updateEditorData();\n\t\t\t\t}\n\n\t\t\t\tif ( rootsWithChangedAttributes.length ) {\n\t\t\t\t\t_updateEditorAttributes( writer, rootsWithChangedAttributes );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}, [ data, attributes ] );\n\n\tconst _getStateDiff = (\n\t\tpreviousState: Record<string, unknown>,\n\t\tnewState: Record<string, unknown>\n\t): {\n\t\taddedKeys: Array<string>;\n\t\tremovedKeys: Array<string>;\n\t} => {\n\t\tconst previousStateKeys = Object.keys( previousState );\n\t\tconst newStateKeys = Object.keys( newState );\n\n\t\treturn {\n\t\t\taddedKeys: newStateKeys.filter( key => !previousStateKeys.includes( key ) ),\n\t\t\tremovedKeys: previousStateKeys.filter( key => !newStateKeys.includes( key ) )\n\t\t};\n\t};\n\n\tconst _handleNewRoots = ( roots: Array<string> ) => {\n\t\troots.forEach( rootName => {\n\t\t\teditor!.addRoot( rootName, {\n\t\t\t\tdata: data[ rootName ] || '',\n\t\t\t\tattributes: attributes?.[ rootName ] || {},\n\t\t\t\tisUndoable: true\n\t\t\t} );\n\t\t} );\n\t};\n\n\tconst _handleRemovedRoots = ( roots: Array<string> ) => {\n\t\troots.forEach( rootName => {\n\t\t\teditor!.detachRoot( rootName, true );\n\t\t} );\n\t};\n\n\tconst _updateEditorData = () => {\n\t\t// If any of the roots content has changed, set the editor data.\n\t\t// Unfortunately, we cannot set the editor data just for one root, so we need to overwrite all roots (`nextProps.data` is an\n\t\t// object with data for each root).\n\t\teditor!.data.set( data, { suppressErrorInCollaboration: true } as any );\n\t};\n\n\tconst _updateEditorAttributes = ( writer: Writer, roots: Array<string> ) => {\n\t\troots.forEach( rootName => {\n\t\t\tObject.keys( attributes![ rootName ] ).forEach( attr => {\n\t\t\t\teditor!.registerRootAttribute( attr );\n\t\t\t} );\n\n\t\t\twriter.clearAttributes( editor!.model.document.getRoot( rootName )! );\n\t\t\twriter.setAttributes( attributes![ rootName ], editor!.model.document.getRoot( rootName )! );\n\t\t} );\n\t};\n\n\tconst _externalSetData: Dispatch<SetStateAction<Record<string, string>>> = useCallback(\n\t\tnewData => {\n\t\t\tshouldUpdateEditor.current = true;\n\t\t\tsetData( newData );\n\t\t},\n\t\t[ setData ]\n\t);\n\n\tconst _externalSetAttributes: Dispatch<SetStateAction<Record<string, Record<string, unknown>>>> = useCallback(\n\t\tnewAttributes => {\n\t\t\tshouldUpdateEditor.current = true;\n\t\t\tsetAttributes( newAttributes );\n\t\t},\n\t\t[ setAttributes ]\n\t);\n\n\treturn {\n\t\teditor, editableElements: elements, toolbarElement: <EditorToolbarWrapper editor={editor} />,\n\t\tdata, setData: _externalSetData,\n\t\tattributes, setAttributes: _externalSetAttributes\n\t};\n};\n\nconst EditorToolbarWrapper = ( { editor }: any ) => {\n\tconst toolbarRef = useRef<HTMLDivElement>( null );\n\n\tuseEffect( () => {\n\t\tconst toolbarContainer = toolbarRef.current;\n\n\t\tif ( !editor || !toolbarContainer ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst element = editor.ui.view.toolbar.element!;\n\n\t\tif ( toolbarContainer ) {\n\t\t\ttoolbarContainer.appendChild( element! );\n\t\t}\n\n\t\treturn () => {\n\t\t\tif ( toolbarContainer ) {\n\t\t\t\ttoolbarContainer.removeChild( element! );\n\t\t\t}\n\t\t};\n\t}, [ editor && editor.id ] );\n\n\treturn <div ref={toolbarRef}></div>;\n};\n\nexport default useMultiRootEditor;\n\ninterface ErrorDetails {\n\tphase: 'initialization' | 'runtime';\n\twillEditorRestart?: boolean;\n}\n\nexport type MultiRootHookProps = {\n\tisLayoutReady?: boolean;\n\tdisabled?: boolean;\n\tdata: Record<string, string>;\n\trootsAttributes?: Record<string, Record<string, unknown>>;\n\teditor: typeof MultiRootEditor;\n\twatchdogConfig?: WatchdogConfig;\n\tdisableWatchdog?: boolean;\n\tdisableTwoWayDataBinding?: boolean;\n\n\tonReady?: ( editor: MultiRootEditor ) => void;\n\tonError?: ( error: Error, details: ErrorDetails ) => void;\n\tonChange?: ( event: EventInfo, editor: MultiRootEditor ) => void;\n\tonFocus?: ( event: EventInfo, editor: MultiRootEditor ) => void;\n\tonBlur?: ( event: EventInfo, editor: MultiRootEditor ) => void;\n\n\tconfig?: Record<string, unknown>;\n};\n\nexport type MultiRootHookReturns = {\n\teditor: MultiRootEditor | null;\n\teditableElements: Array<JSX.Element>;\n\ttoolbarElement: JSX.Element;\n\tdata: Record<string, string>;\n\tsetData: Dispatch<SetStateAction<Record<string, string>>>;\n\tattributes: Record<string, Record<string, unknown>>;\n\tsetAttributes: Dispatch<SetStateAction<Record<string, Record<string, unknown>>>>;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}